<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Energetic Trading Heat</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: transparent;
    overflow: hidden;
  }

  .fire-wrap {
    width: 100%;
    height: 90px; /* same effective height as your current flame */
    position: relative;
  }

  canvas {
    width: 100%;
    height: 100%;
    display: block;
  }
</style>
</head>

<body>
<div class="fire-wrap">
  <canvas id="fire"></canvas>
</div>

<script>
const canvas = document.getElementById("fire");
const ctx = canvas.getContext("2d");

let W, H, DPR;
function resize() {
  DPR = window.devicePixelRatio || 1;
  W = canvas.clientWidth * DPR;
  H = canvas.clientHeight * DPR;
  canvas.width = W;
  canvas.height = H;
}
resize();
window.addEventListener("resize", resize);

/* ================= CONFIG ================= */
const FLAME_HEIGHT = H * 0.55;   // SAME height as current
const FLAME_SPACING = 7;         // denser, not wall
const FLAME_COUNT = Math.floor(W / FLAME_SPACING);

const flames = [];
for (let i = 0; i < FLAME_COUNT; i++) {
  flames.push({
    x: i * FLAME_SPACING + Math.random() * 2,
    phase: Math.random() * Math.PI * 2,
    sway: Math.random() * 0.6 + 0.4,
    flicker: Math.random() * 0.6 + 0.7
  });
}

/* ================= TIME (DELTA FIX) ================= */
let last = performance.now();

function loop(now) {
  const dt = Math.min(0.035, (now - last) / 1000);
  last = now;

  ctx.clearRect(0, 0, W, H);

  /* ---- BASE GLOW ---- */
  const baseGrad = ctx.createRadialGradient(
    W / 2, H, 0,
    W / 2, H, H * 0.6
  );
  baseGrad.addColorStop(0, "rgba(255,180,90,0.75)");
  baseGrad.addColorStop(0.5, "rgba(255,120,40,0.35)");
  baseGrad.addColorStop(1, "rgba(0,0,0,0)");

  ctx.fillStyle = baseGrad;
  ctx.fillRect(0, H * 0.55, W, H);

  /* ---- FLAMES ---- */
  for (const f of flames) {
    f.phase += dt * 3.2 * f.flicker;

    const sway =
      Math.sin(f.phase) * 2.2 * f.sway +
      Math.sin(f.phase * 0.6) * 1.2;

    const flameTop = H - FLAME_HEIGHT;
    const tipY =
      flameTop +
      Math.sin(f.phase * 1.4) * 4;

    ctx.beginPath();
    ctx.moveTo(f.x, H);
    ctx.quadraticCurveTo(
      f.x + sway * 0.6,
      (H + tipY) / 2,
      f.x + sway,
      tipY
    );

    const grad = ctx.createLinearGradient(0, tipY, 0, H);
    grad.addColorStop(0, "rgba(255,245,215,0.9)");
    grad.addColorStop(0.35, "rgba(255,180,90,0.95)");
    grad.addColorStop(0.7, "rgba(255,120,40,0.9)");
    grad.addColorStop(1, "rgba(0,0,0,0)");

    ctx.strokeStyle = grad;
    ctx.lineWidth = 2.2;
    ctx.lineCap = "round";
    ctx.stroke();
  }

  /* ---- HEAT SHIMMER (TOP ONLY) ---- */
  ctx.save();
  ctx.globalAlpha = 0.06;
  for (let i = 0; i < 120; i++) {
    const y = Math.random() * FLAME_HEIGHT * 0.6;
    const x =
      Math.random() * W +
      Math.sin(now * 0.001 + y) * 6;

    ctx.fillStyle = "white";
    ctx.fillRect(x, y, 1.2, 1.2);
  }
  ctx.restore();

  /* ---- CONSTANT SUBTLE HAZE ---- */
  ctx.save();
  ctx.globalAlpha = 0.08;
  ctx.fillStyle = "rgba(0,0,0,0.25)";
  ctx.fillRect(0, 0, W, H * 0.35);
  ctx.restore();

  requestAnimationFrame(loop);
}

requestAnimationFrame(loop);
</script>
</body>
</html>